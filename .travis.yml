language: node_js
node_js:
- '12.4.0'

addons:
  chrome: stable

services:
  - xvfb

jdk:
  - default-jdk

script:
- bash ./scripts/runTests.sh
- bash ./scripts/snyk.sh

install:
- yarn install

before_install:
- curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --version 1.13.0
- export PATH="$HOME/.yarn/bin:$PATH"
- sudo apt-get update
- sudo apt-get install -y libappindicator1

notifications:
  slack:
    if: type = cron
    secure: BE3SGf9PoW3BLXi9SEJMrx43GHTiZ6RrfwTY9FWtiNcPq5yfhjVCTHHEtJtsTrX37CakVC5WVi0CEGH+H/OevN9u/sDa0dCuwER1ExeIAaLK7ssmCy6bptkOfR454fpwLuoBaZl+zC2xr7cy77pMfJs6dAsdlsvAkitIdM+sVwLgfTfWEKnG0XDVkxWkE554GmTej5JrENUoQRgHVjbG6Bb8PSZaniqx86s8g7+wgoFJUpeEmVa9lj9eR9zj7D1G2FrPDVhFSmdYOBGgb9vlQPWUX9gVD3hB14ZyEsDXSToWZLlFXtp4/vnhkN/q6ZXmc3Cv7VpluBnpDYpJEAElHO9UnJ+BkBghUti0ate0s4gqCR18YY+8/ghvmkHEPZHx2W+XqHXTa58kygAPRZZsnp8yw4cY3TUyV3oSubiZiyVK2Nr8Nlnlo771Emd2rI8rJQlcMKLeuUkusKi234h6v0jVPk4cUjZd1D3oO1AaK4cW4K0QKyrDQnwauZrx8x441n8sJt12iLY59M4hemZ6HXZgjxSacuDYOqRo/qM5sFdnozjsxOD5JWfTNFGlUHxmVE5qXw8wijIXefvjsMuU5knUoiunMwedsKlp01a5vv41zQTV+p/V9nrqb7NAB/FLZ9s3Nkkb8oUSEoEjcb8FMJOGeDIRH/u5j/1qE1qimrQ=
  on_success: never
  on_failure: always
